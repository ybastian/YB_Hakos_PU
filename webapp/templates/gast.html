{% extends "layout_no_sidebar.html" %}

{% block content %}
  <h1>NeuzugÃ¤nge</h1>

  {% if current_user.is_authenticated %}
    <p>
      <span style="margin-right:50px;">
        Genehmiger: {{ current_user.firstname }} {{ current_user.surname }}
      </span>
      Zum Genehmigen neuer Benutzer stehen {{ guest_count }} Neuregistrierungen an.
    </p>

    {% if guest_count == 0 %}
      <div class="alert alert-success">
        Es stehen aktuell keine Neuregistrierungen an.
      </div>
    {% else %}
      <table class="table table-bordered table-striped table-hover">
        <thead>
          <tr>
            <th>Aktion</th>
            <th>VdS Nr.</th>
            <th>Nachname</th>
            <th>Vorname</th>
            <th>Emailadresse</th>
            <th>Benutzername</th>
          </tr>
        </thead>
        <tbody>
          {% for user in guest_users %}
            <tr>
              <td>
                <form method="post"
                      action="{{ url_for('main.approve_guest', user_id=user.id) }}"
                      style="display:inline;"
                      onsubmit="return confirm('Neuling wirklich genehmigen?');">
                  <button type="submit" class="btn btn-sm btn-success" title="Genehmigen">
                    <i class="bi bi-hand-thumbs-up-fill"></i>
                  </button>
                </form>

                <form method="post"
                      action="{{ url_for('main.reject_guest', user_id=user.id) }}"
                      style="display:inline;"
                      onsubmit="return confirm('Neuling ablehnen?');">
                  <button type="submit" class="btn btn-sm btn-danger" title="Ablehnen">
                    <i class="bi bi-hand-thumbs-down"></i>
                  </button>
                </form>
              </td>

              <td>{{ user.vds_number }}</td>
              <td>{{ user.surname }}</td>
              <td>{{ user.firstname }}</td>
              <td>{{ user.email }}</td>
              <td>{{ user.name }}</td>
            </tr>
          {% endfor %}
        </tbody>
      </table>
    {% endif %}

    <a class="btn btn-warning" style="background-color:#007bff; color:white;"
       href="{{ url_for('main.home') }}">Zur Startseite</a>
  {% endif %}
{% endblock content %}